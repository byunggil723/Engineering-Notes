# 네트워크 개요

### 네트워크란?

한 지점에서 원하는 다른 지점까지 의미있는 정보를 보다 정확하고 빠르게 상대방이 이해할 수 있도록 전송하는 것을 의미한다.

### 거리에 따른 네트워크 분류

| 구분          | PAN             | LAN                | MAN                 | WAN                 | SAN                  |
| ------------- | --------------- | ------------------ | ------------------- | ------------------- | -------------------- |
| **범위**      | ~10m            | ~수 km             | ~수십 km            | 전 세계             | 데이터센터 내        |
| **속도**      | 2~675 Mbps      | 100 Mbps ~ 10 Gbps | 수십 Mbps ~ 수 Gbps | 수 Kbps ~ 수십 Gbps | 수 Gbps ~ 수십 Gbps  |
| **지연시간**  | 매우 낮음       | 매우 낮음          | 중간                | 높음                | 극도로 낮음          |
| **구축비용**  | 매우 저렴       | 저렴               | 중간                | 높음                | 매우 높음            |
| **소유권**    | 개인            | 개인 / 조직        | 지자체 / 통신사     | 통신사              | 기업 / 조직          |
| **주요 기술** | Bluetooth, UWB  | Wi-Fi, 이더넷      | 광섬유, 무선, DQDB  | 인터넷, 전용선      | Fiber Channel, iSCSI |
| **대표 예시** | 스마트폰-이어폰 | 사무실 네트워크    | 도시 행정망         | 인터넷              | 데이터센터 스토리지  |

각 네트워크 분류 기준 앞에 W가 붙으면 무선(Wireless)을 의미한다.<br>
예를 들어 PAN → WPAN, LAN → WLAN은 각각 무선 개인 네트워크와 무선 근거리 네트워크를 뜻한다.

\* UWB(Ultra Wideband): 아주 짧은 거리( ~ cm)에서 매우 정확한 위치 측정이 가능한 무선 통신 기술<br> \* DQDB(Distributed Queue Dual Bus): 1980년대 IEEE 802.6 표준으로 개발된 MAN 네트워크 프로토콜<br> \* Fibre Channel: SAN 전용으로 설계된 초고속·저지연 스토리지 통신 프로토콜<br> \* iSCSI: IP 네트워크(TCP/IP)를 이용해 SAN을 구현하는 기술

IEEE 802 계열 표준은 LAN / MAN 표준 묶음으로서, LAN 및 MAN을 설계하고 구축할 때 반드시 지켜야 할 규칙서(설계도)이다.

IEEE 802 표준 문서에는

**1) 프레임 구조 (Frame Format)**

- 데이터가 어떤 필드 순서로 구성되는지<br>
  예: 목적지 MAC, 출발지 MAC, 길이/타입, 데이터, CRC

**2) 주소 체계**

- MAC 주소 길이(48bit), 표기 방식
- 누가 누구에게 보내는지 식별 규칙

**3) 매체 접근 방식 (Media Access)**

- 여러 장치가 같은 선을 쓸 때 충돌을 어떻게 처리하는지<br>
  예: CSMA/CD, 토큰 방식 등

**4) 물리 계층 규격**

- 케이블 종류(UTP, 광섬유)
- 전기 신호/광 신호 특성
- 최대 거리, 속도

**5) 동작 조건**

- 속도(10Mbps, 1Gbps …)
- 전이중/반이중 여부
- 오류 검출 방식

등이 구체적으로 정의되어 있다.

### 네트워크 속도

네트워크의 속도는 다음과 같이 정의한다.

**bps (bits per second, 단위 시간당 전송할 수 있는 데이터의 양)**

EX:<br>
100 Mbps = 초당 100 메가비트 전송<br>
1 Gbps = 초당 1 기가비트 전송

| 접두어   | 의미 | 배수                 |
| -------- | ---- | -------------------- |
| K (Kilo) | 천   | $(10^3 = 1{,}000)$   |
| M (Mega) | 백만 | $(10^6 = 1{,}000^2)$ |
| G (Giga) | 십억 | $(10^9 = 1{,}000^3)$ |

### 트래픽(traffic)

**트래픽(traffic)** 이란 단위 시간 동안 전송되거나 전송을 요구하는 데이터의 양이다.<br>
(단위: bps)

### 전송 방식에 따른 네트워크 분류

#### 1. 단방향 통신 (Simplex)

데이터 전송만 가능 (TV, 라디오 등)

#### 2. 반이중 통신 (Half Duplex)

데이터를 송신하고, 수신할 수는 있지만 동시에 불가능 (무전기 등)

#### 3. 전이중 통신 (Full Duplex)

동시에 데이터 송·수신 가능 (전화기 등)

### 네트워크 토폴로지

| 토폴로지 | 구조      | 장점                                         | 단점                                        |
| -------- | --------- | -------------------------------------------- | ------------------------------------------- |
| 트리형   | 계층 구조 | 확장성 우수, 높은 신뢰도                     | 상위 노드 장애 시 하위 노드 다운, 병목 현상 |
| 버스형   | 공통선    | 확장성 우수, 저비용, 간단한 구조             | 충돌 발생 가능, 병목 현상                   |
| 스타형   | 중앙 집중 | 확장성 우수, 고속 네트워크에 적합, 관리 용이 | 중앙 노드 장애 시 전체 다운, 높은 구축 비용 |
| 링형     | 원형      | 충돌 없음                                    | 장애 취약, 네트워크 구성 변경이 어려움      |
| 메시형   | 완전 연결 | 장애 없음, 높은 신뢰성                       | 높은 구축·운영 비용                         |

버스형 토폴로지는 하나의 공통 통신선(버스)을 여러 노드가 공유하며, 임의로 전송하기 때문에 충돌이 쉽게 발생할 수 있는 구조이다.<br>
반면, 링형 토폴로지에서는 토큰을 가진 노드만 전송하고 다른 노드들은 전송 대기 상태에 있어, 충돌이 발생하지 않는다.

### 회선 교환

전화는 회선 교환의 대표적인 예이다.<br>
누군가와 통화 중일 때 송신자와 수신자 사이에는 전용 회선이 설정되어 안정적인 통화 품질이 보장된다.<br>
그러나 해당 회선은 통화가 종료될 때까지 두 사람에게 독점적으로 할당되어 침묵 구간에도 그대로 점유하기 때문에, QoS(Quality of Service)는 높지만 자원 소모가 크다.

#### 장점

- 대용량의 데이터를 고속으로 전송하기 좋다.
- 고정적인 대역폭을 사용하여 지연·지터(대기 시간의 변동 정도)가 예측 가능하고, 이를 통해 혼잡 제어가 가능하여 실시간 통신 품질을 안정적으로 보장할 수 있다.
- 접속에는 긴 시간이 소요되나 접속 이후에는 항상 유지되어 전송 지연이 없으며, 데이터 전송률이 일정하다.

#### 단점

- 비효율적인 회선 이용률
- 반드시 같은 전송률과 기종 사이에서 송수신 요구(다양한 속도를 지닌 개체 간 통신 제한)
- 속도나 코드의 변환 불가
- 에러(잡음) 없는 데이터 전송에는 부적합
- 고가의 통신 비용

\* 대역폭(Bandwidth, 단위: Hz): 데이터 통신에서 최고 주파수와 최저 주파수의 차이, 대역폭이 크면 클수록 많은 데이터를 전송할 수 있다.

### 패킷 교환

패킷: 네트워크에서 데이터를 주고 받을 때 사용되는 데이터 조각

인터넷에서 통신을 하려면 전화번호처럼 상대를 식별할 수 있는 주소가 필요한데, 그 역할을 하는 것이 IP 주소이다.<br>
이미지나 파일과 같은 데이터를 전송하기 위해, 우선 전송 계층(L4, TCP/UDP)에서 데이터를 여러 조각으로 나누어 전송 단위를 만든다.<br>
이후 각 조각에 IP 헤더(출발지/목적지 IP 주소 등)를 붙여 IP 패킷(= IP 데이터그램)으로 캡슐화한 뒤 네트워크로 전송한다.<br>
이때 TCP는 데이터가 중간에서 쪼개지는 일을 최소화하기 위해, 한 번에 전송할 수 있는 데이터의 최대 크기인 MSS(Maximum Segment Size)를 고려하여 세그먼트를 구성한다.<br>
MSS는 각 링크에서 한 번에 실어 보낼 수 있는 최대 크기인 MTU(Maximum Transmission Unit)를 기준으로 정해지며, 흔히 이더넷 환경에서는 MTU가 1500바이트이므로 IP 헤더(20B) 와 TCP 헤더(20B)를 제외한 약 1460바이트 정도가 된다.<br>
다만 MTU/MSS 값은 Wi-Fi, LTE/5G, PPPoE 등 네트워크 환경과 경로(Path)에 포함된 링크들의 조건에 따라 달라질 수 있다.<br>
여기서 링크(link)란 유선/무선을 포함하여 두 장비가 직접 연결되어 데이터를 주고받는 한 구간을 의미하며, 인터넷 전체 경로는 이러한 링크들이 여러 개 이어진 형태로 구성된다.<br>
MSS는 TCP 연결을 시작할 때는 3-way handshake 과정에서 교환된다.<br>
즉, 처음 SYN을 보낼 때는 상대 MSS를 아직 알 수 없지만, SYN 패킷 자체는 크기가 작아 전송에 문제가 거의 없으며, 이 SYN 패킷 안에 자신이 수신 가능한 MSS 값을 담아 보내고 상대도 이에 응답함으로써 양쪽이 MSS 정보를 공유하게 된다.<br>
라우터(router)는 각 IP 패킷의 목적지 IP를 확인하고, 라우팅 테이블에 따라 다음 홉(next hop)을 선택하여 패킷을 전달해 주는 장치다.<br>
홉(hop) 은 패킷이 목적지로 가는 과정에서 라우터와 같은 중계 장비를 한 번 거치는 단위(중간 경유 1회)를 의미하며, 홉 간 전달은 현재 라우터가 패킷을 수신한 뒤 목적지 IP를 확인하고, 다음 홉으로 선택된 라우터(또는 목적지)로 패킷을 넘기는 과정을 뜻한다.<br>
각 IP 패킷들은 상황에 따라 서로 다른 경로로 전달될 수도 있으며, 수신 측은 TCP의 시퀀스 번호 등 전송 계층의 순서 정보를 이용해 패킷들을 올바른 순서로 재조립하여 최종 데이터를 얻는다.<br>

### 가상 회선

데이터를 전송하기 전에 송신 측과 수신 측 사이의 논리적 연결(가상 회선)을 먼저 설정한 뒤, 이후 패킷들이 정해진 해당 경로를 따라 전달되도록 하는 교환 방식이다.

장점: 순서 뒤섞임이 상대적으로 적고, 중계가 단순/빠를 수 있음<br>
단점: 연결 설정을 위한 추가 비용이 있고, 경로 장애 시 연결 재설정이 필요

### 메세지 교환

전송 데이터를 패킷으로 쪼개지 않고, 하나의 메시지(큰 덩어리) 단위로 네트워크를 통해 전달하는 교환 방식이다.<br>
각 중간 노드는 메시지를 완전히 수신한 뒤 저장(store)하고, 이후 다음 노드로 전달(forward)하는 Store-and-Forward 구조를 가진다.

장점: 회선 교환과 달리 전용 회선 예약 없이 전달 가능(자원 공유)
단점: 메시지가 크면 홉마다 지연이 누적되고, 저장 부담이 커서 현대 인터넷에는 비효율적
